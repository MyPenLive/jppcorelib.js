(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q={}.hasOwnProperty,r=function(a,b){function d(){this.constructor=a}for(var c in b)q.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},s=[].slice,t=function(a,b){return function(){return a.apply(b,arguments)}};l=function(){function a(b){return a._validatePath(b)?new p(b):_printError("Namespace('"+b+"'), '"+b+"' is invalid.")}return a._spaces={},a._separator=".",a._defaultScope=window,a._regSeparator=a._separator.match(/[\[\]\-^$.+*?{}\\]/)!==null?"\\"+a._separator:a._separator,a._regPath=new RegExp("^[0-9a-zA-Z]+("+a._regSeparator+"[0-9a-zA-Z]+)*$"),a._getSpace=function(b){return a._spaces[b]},a._setSpace=function(b){var c,d;return(d=(c=a._spaces)[b])!=null?d:c[b]={}},a._existSpace=function(b){return a._spaces[b]!=null},a._validatePath=function(b){return b!=null&&a._regPath.test(b)},a._print=function(a){return typeof console!="undefined"&&console!==null?typeof console.log=="function"?console.log(a):void 0:void 0},a._printError=function(b,c){return a._print("###ERROR### at "+b+" : "+c)},a.enumerate=function(){return a._print(a._spaces)},a}(),p=function(){function a(a){this._path=a,this._names=this._path.split(l._separator),this._space=l._getSpace(this._path),this._scope=l._defaultScope}return a.prototype.register=function(a,b,c){return c==null&&(c=!1),a==null||b==null?(l._printError("Namespace('"+this._path+"').register","one of arguments is not defined"),this):(this._allocate(),c||this._space[a]==null?(this._space[a]=b,this):(l._printError("Namespace('"+this._path+"').register","'"+a+"' is already registered."),this))},a.prototype["import"]=function(a){var b,c,d,e,f;a==null&&(a="*"),this._allocate();if(a==="*"){f=this._space;for(b in f)c=f[b],this._extern(b);return this}if(a instanceof Array){for(d=0,e=a.length;d<e;d++)b=a[d],this._extern(b);return this}return this._space[a]!=null?(this._extern(a),this):(l._printError("Namespace('"+this._path+"').import","'"+a+"' is not defined"),this)},a.prototype.exist=function(){return l._existSpace(this._path)},a.prototype.use=function(){var a,b,c,d,e,f,g,h,i;this._allocate(),c=this._scope,g=this._names;for(e=0,f=g.length;e<f;e++)b=g[e],c=(h=c[b])!=null?h:c[b]={};i=this._space;for(a in i)d=i[a],c[a]=d;return this},a.prototype.scope=function(a){return a==null&&(a=l._defaultScope),this._scope=a,this},a.prototype.getPath=function(){return this._path},a.prototype._allocate=function(){var a,b,c;if(l._existSpace(this._path))return;this._space=l._setSpace(this._path),b=this._names.length,a=1,c=[];while(a<b)l._setSpace(this._names.slice(0,a).join(".")),c.push(++a);return c},a.prototype._extern=function(a){return this._scope[a]=this._space[a]},a}(),l("jpp.util").register("Namespace",l).use(),d=function(){function a(){}return a.build=function(a,b){return b==null&&(b=""),new Error("Error at "+a+(b!==""?" : "+b:void 0))},a["throw"]=function(a,b){throw b==null&&(b=""),this.build(a,b)},a}(),l("jpp.util").register("Err",d),e=function(){function a(a,b,c){this.type=a,this.target=b,this.extra=c}return a.COMPLETE="complete",a.OPEN="open",a.CLOSE="close",a.ERROR="error",a.CANCEL="cancel",a.RESIZE="resize",a.INIT="init",a.CONNECT="connect",a.PROGRESS="progress",a.ADDED="added",a.REMOVED="removed",a.SELECT="select",a.FOCUS="focus",a.RENDER="render",a}(),l("jpp.event").register("Event",e),f=function(){function a(a){a==null&&(a=null),this._target=a!=null?a:this,this._listeners={}}return a.prototype.addEventListener=function(a,b){var c,d,e,f,g,h;if(typeof b!="function")return this;(g=(d=this._listeners)[a])==null&&(d[a]=[]),h=this._listeners[a];for(e=0,f=h.length;e<f;e++){c=h[e];if(c===b)return this}return this._listeners[a].push(b),this},a.prototype.removeEventListener=function(a,b){var c,d,e,f,g;if(!this.hasEventListener(a))return this;g=this._listeners[a];for(c=e=0,f=g.length;e<f;c=++e)d=g[c],d===b&&this._listeners[a].splice(c,1);return this._listeners[a].length===0&&delete this._listeners[a],this},a.prototype.removeAllEventListeners=function(a){return a==null&&(a=""),a===""?this._listeners={}:delete this._listeners[a],this},a.prototype.hasEventListener=function(a){return this._listeners[a]!=null},a.prototype.dispatchEvent=function(a,b){var c,d,f,g,h;b==null&&(b=null);if(!this.hasEventListener(a))return this;c=new e(a,this._target,b),h=this._listeners[a];for(f=0,g=h.length;f<g;f++)d=h[f],d.call(this._target,c);return this},a}(),l("jpp.event").register("EventDispatcher",f),c=function(){function a(){}return a.SLEEPING=0,a.EXECUTING=1,a.INTERRUPTING=2,a}(),l("jpp.command").register("CommandState",c),a=function(a){function b(a,d,e){a==null&&(a=null),d==null&&(d=null),e==null&&(e=null),b.__super__.constructor.call(this),this.setExecuteFunction(a),this.setInterruptFunction(d),this.setDestroyFunction(e),this._state=c.SLEEPING,this._parent=null}return r(b,a),b.prototype.execute=function(){return this._state>c.SLEEPING&&d["throw"]("Command.execute","Command is already executing."),this._state=c.EXECUTING,this.getExecuteFunction().call(this,this),this},b.prototype.interrupt=function(){return this._state<c.EXECUTING&&d["throw"]("Command.interrupt","Command is sleeping"),this._state=c.INTERRUPTING,this.getInterruptFunction().call(this,this),this},b.prototype.destroy=function(){return this._state=c.SLEEPING,this.getDestroyFunction().call(this,this),this._parent=null,this.__executeFunction=null,this.__interruptFunction=null,this.__destroyFunction=null,this},b.prototype.notifyComplete=function(){switch(this._state){case c.SLEEPING:return this;case c.EXECUTING:return this.dispatchEvent(e.COMPLETE),this.destroy(),this;case c.INTERRUPTING:return this.dispatchEvent(e.COMPLETE),this.destroy(),this}},b.prototype.getExecuteFunction=function(){var a;return(a=this.__executeFunction)!=null?a:this._executeFunction},b.prototype.setExecuteFunction=function(a){return this.__executeFunction=a,this},b.prototype.getInterruptFunction=function(){var a;return(a=this.__interruptFunction)!=null?a:this._interruptFunction},b.prototype.setInterruptFunction=function(a){return this.__interruptFunction=a,this},b.prototype.getDestroyFunction=function(){var a;return(a=this.__destroyFunction)!=null?a:this._destroyFunction},b.prototype.setDestroyFunction=function(a){return this.__destroyFunction=a,this},b.prototype.getState=function(){return this._state},b.prototype.getParent=function(){return this._parent},b.prototype.setParent=function(a){return this._parent=a},b.prototype._executeFunction=function(a){return this.notifyComplete()},b.prototype._interruptFunction=function(a){},b.prototype._destroyFunction=function(a){},b}(f),l("jpp.command").register("Command",a),b=function(a){function b(){var a;a=1<=arguments.length?s.call(arguments,0):[],b.__super__.constructor.call(this),this._commands=[],this.addCommand.apply(this,a)}return r(b,a),b.prototype.addCommand=function(){var a;return a=1<=arguments.length?s.call(arguments,0):[],this._setParent.apply(this,a),this._commands=this.getCommands().concat(a),this},b.prototype.insertCommand=function(){var a,b;return b=arguments[0],a=2<=arguments.length?s.call(arguments,1):[],this._setParent.apply(this,a),Array.prototype.splice.apply(this.getCommands(),[b,0].concat(a)),this},b.prototype._setParent=function(){var a,b,c,d,e;b=1<=arguments.length?s.call(arguments,0):[],e=[];for(c=0,d=b.length;c<d;c++)a=b[c],e.push(a.setParent(this));return e},b.prototype.getCommandByIndex=function(a){return this._commands[a]},b.prototype.getCommands=function(){return this._commands},b.prototype.getLength=function(){return this._commands.length},b.prototype._executeFunction=function(a){return this.notifyComplete()},b.prototype._interruptFunction=function(a){},b.prototype._destroyFunction=function(a){return this._commands=[]},b}(a),l("jpp.command").register("CommandList",b),n=function(a){function b(){var a;a=1<=arguments.length?s.call(arguments,0):[],this._completeHandler=t(this._completeHandler,this),b.__super__.constructor.apply(this,a),this._currentCommand=null,this._position=0}return r(b,a),b.prototype.addCommand=function(){var a;return a=1<=arguments.length?s.call(arguments,0):[],b.__super__.addCommand.apply(this,a),this},b.prototype.insertCommand=function(){var a;return a=1<=arguments.length?s.call(arguments,0):[],b.__super__.insertCommand.apply(this,[this._position+1].concat(s.call(a))),this},b.prototype._next=function(){return this._currentCommand=this.getCommandByIndex(this._position),this._currentCommand.addEventListener(e.COMPLETE,this._completeHandler),this._currentCommand.execute()},b.prototype._completeHandler=function(a){return this._currentCommand.removeEventListener(e.COMPLETE,this._completeHandler),this._currentCommand=null,++this._position>=this.getLength()?this.notifyComplete():this._next()},b.prototype.getPosition=function(){return this._position},b.prototype._executeFunction=function(a){return this._position=0,this._next()},b.prototype._interruptFunction=function(a){var c;return(c=this._currentCommand)!=null&&c.interrupt(),this._position=0,b.__super__._interruptFunction.call(this,a)},b.prototype._destroyFunction=function(a){return this._currentCommand!=null&&(this._currentCommand.removeEventListener(e.COMPLETE,this._completeHandler),this._currentCommand.destroy()),this._currentCommand=null,this._position=0,b.__super__._destroyFunction.call(this,a)},b}(b),l("jpp.command").register("SerialList",n),m=function(a){function b(){var a;a=1<=arguments.length?s.call(arguments,0):[],this._completeHandler=t(this._completeHandler,this),b.__super__.constructor.apply(this,a),this._completeCount=0}return r(b,a),b.prototype.addCommand=function(){var a;return a=1<=arguments.length?s.call(arguments,0):[],b.__super__.addCommand.apply(this,a),this},b.prototype.insertCommand=function(){var a;return a=1<=arguments.length?s.call(arguments,0):[],b.__super__.insertCommand.apply(this,[this.getLength()].concat(s.call(a))),this},b.prototype._completeHandler=function(a){if(++this._completeCount>=this.getLength())return this.notifyComplete()},b.prototype.getCompleteCount=function(){return this._completeCount},b.prototype._executeFunction=function(a){var b,c,d,f,g;this._completeCount=0,f=this.getCommands(),g=[];for(c=0,d=f.length;c<d;c++)b=f[c],b.addEventListener(e.COMPLETE,this._completeHandler),g.push(b.execute());return g},b.prototype._interruptFunction=function(a){var c,d,e,f;f=this.getCommands();for(d=0,e=f.length;d<e;d++)c=f[d],c.interrupt();return b.__super__._interruptFunction.call(this,a)},b.prototype._destroyFunction=function(a){var c,d,f,g;g=this.getCommands();for(d=0,f=g.length;d<f;d++)c=g[d],c.removeEventListener(e.COMPLETE,this._completeHandler),c.destroy();return this._completeCount=0,b.__super__._destroyFunction.call(this,a)},b}(b),l("jpp.command").register("ParallelList",m),g=function(a){function b(a,c){a==null&&(a=null),c==null&&(c=[]),b.__super__.constructor.call(this),this._func=a,this._args=c}return r(b,a),b.prototype.getFunction=function(){return this._func},b.prototype.setFunction=function(a){return this._func=a,this},b.prototype.getArguments=function(){return this._args},b.prototype.setArguments=function(a){return this._args=a,this},b.prototype._executeFunction=function(a){return typeof this._func=="function"&&this._func.apply(this,this._args),this.notifyComplete()},b.prototype._interruptFunction=function(a){},b.prototype._destroyFunction=function(a){return this._func=null,this._args=null},b}(a),l("jpp.command").register("Func",g),o=function(a){function b(a){a==null&&(a=1),this._completeHandler=t(this._completeHandler,this),b.__super__.constructor.call(this),this._time=a,this._timeoutId=-1}return r(b,a),b.prototype._cancel=function(){return this._timeoutId!==-1&&clearTimeout(this._timeoutId),this._timeoutId=-1},b.prototype._completeHandler=function(a){return this.notifyComplete()},b.prototype.getTime=function(){return this._time},b.prototype.setTime=function(a){return this._time=a,this},b.prototype._executeFunction=function(a){return this._timeoutId=setTimeout(this._completeHandler,this._time*1e3)},b.prototype._interruptFunction=function(a){return this._cancel()},b.prototype._destroyFunction=function(a){return this._cancel()},b}(a),l("jpp.command").register("Wait",o),k=function(a){function b(a,c){a==null&&(a=null),c==null&&(c=null),this._handler=t(this._handler,this),b.__super__.constructor.call(this),this._type=a,this._dispatcher=c}return r(b,a),b.prototype._handler=function(a){return this.notifyComplete()},b.prototype.getType=function(){return this._type},b.prototype.setType=function(a){return this._type=a,this},b.prototype.getDispatcher=function(){return this._dispatcher},b.prototype.setDispatcher=function(a){return this._dispatcher=a,this},b.prototype._executeFunction=function(a){var b;if(this._type!=null)return(b=this._dispatcher)!=null?b.addEventListener(this._type,this._handler):void 0},b.prototype._interruptFunction=function(a){var b;if(this._type!=null)return(b=this._dispatcher)!=null?b.removeEventListener(this._type,this._handler):void 0},b.prototype._destroyFunction=function(a){var b;return this._type!=null&&(b=this._dispatcher)!=null&&b.removeEventListener(this._type,this._handler),this._type=null,this._dispatcher=null},b}(a),l("jpp.command").register("Listen",k),h=function(a){function b(a){a==null&&(a=null),this._completeHandler=t(this._completeHandler,this),b.__super__.constructor.call(this),this._options=a!=null?a:{},this._status="",this._isSucceed=!1}return r(b,a),b.prototype._completeHandler=function(a,b){var d;console.log(this),this._status=b,this._isSucceed=b==="success",typeof (d=this._options).complete=="function"&&d.complete(a,b);if(this.getState()===c.EXECUTING)return this.notifyComplete()},b.prototype.getOptions=function(){return this._options},b.prototype.setOptions=function(a){return this._options=a,this},b.prototype.getUrl=function(){return this._options.url},b.prototype.setUrl=function(a){return this._options.url=a,this},b.prototype.getMethod=function(){return this._options.type},b.prototype.setMethod=function(a){return this._options.type=a,this},b.prototype.getData=function(){return this._options.data},b.prototype.setData=function(a){return this._options.data=a,this},b.prototype.getDataType=function(){return this._options.dataType},b.prototype.setDataType=function(a){return this._options.dataType=a,this},b.prototype.getOnSuccess=function(){return this._options.success},b.prototype.setOnSuccess=function(a){return this._options.success=a,this},b.prototype.getOnError=function(){return this._options.error},b.prototype.setOnError=function(a){return this._options.error=a,this},b.prototype.getOnComplete=function(){return this._options.complete},b.prototype.setOnComplete=function(a){return this._options.complete=a,this},b.prototype.getStatus=function(){return this._status},b.prototype.getIsSucceed=function(){return this._isSucceed},b.prototype._executeFunction=function(a){var b,c,d,e;c={},e=this._options;for(b in e)d=e[b],c[b]=d;return c.complete=this._completeHandler,jQuery.ajax(c)},b.prototype._interruptFunction=function(a){return this},b.prototype._destroyFunction=function(a){return this._options=null,this._status="",this._isSucceed=!1},b}(a),l("jpp.command").register("JqueryAjax",h),i=function(a){function b(a,c,d,e,f){a==null&&(a=null),c==null&&(c=null),d==null&&(d=null),e==null&&(e=null),f==null&&(f=null),b.__super__.constructor.call(this,{type:"get",url:a,data:c,success:d,error:e,dataType:f})}return r(b,a),b}(h),l("jpp.command").register("JqueryGet",i),j=function(a){function b(a,c,d,e,f){a==null&&(a=null),c==null&&(c=null),d==null&&(d=null),e==null&&(e=null),f==null&&(f=null),b.__super__.constructor.call(this,{type:"post",url:a,data:c,success:d,error:e,dataType:f})}return r(b,a),b}(h),l("jpp.command").register("JqueryPost",j)}).call(this)