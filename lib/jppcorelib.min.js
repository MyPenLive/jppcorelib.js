(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=[].slice,B={}.hasOwnProperty,C=function(a,b){function d(){this.constructor=a}for(var c in b)B.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},D=function(a,b){return function(){return a.apply(b,arguments)}};r=function(){function a(b){return a._validatePath(b)?new z(b):_printError("Namespace('"+b+"'), '"+b+"' is invalid.")}return a._spaces={},a._separator=".",a._defaultScope=window,a._regSeparator=a._separator.match(/[\[\]\-^$.+*?{}\\]/)!==null?"\\"+a._separator:a._separator,a._regPath=new RegExp("^[0-9a-zA-Z]+("+a._regSeparator+"[0-9a-zA-Z]+)*$"),a._getSpace=function(b){return a._spaces[b]},a._setSpace=function(b){var c,d;return(d=(c=a._spaces)[b])!=null?d:c[b]={}},a._existSpace=function(b){return a._spaces[b]!=null},a._validatePath=function(b){return b!=null&&a._regPath.test(b)},a._print=function(a){return typeof console!="undefined"&&console!==null?typeof console.log=="function"?console.log(a):void 0:void 0},a._printError=function(b,c){return a._print("###ERROR### at "+b+" : "+c)},a.enumerate=function(){return a._print(a._spaces)},a}(),z=function(){function a(a){this._path=a,this._names=this._path.split(r._separator),this._space=r._getSpace(this._path),this._scope=r._defaultScope}return a.prototype.register=function(a,b,c){return c==null&&(c=!1),a==null||b==null?(r._printError("Namespace('"+this._path+"').register","one of arguments is not defined"),this):(this._allocate(),c||this._space[a]==null?(this._space[a]=b,this):(r._printError("Namespace('"+this._path+"').register","'"+a+"' is already registered."),this))},a.prototype["import"]=function(a){var b,c,d,e,f;a==null&&(a="*"),this._allocate();if(a==="*"){f=this._space;for(b in f)c=f[b],this._extern(b);return this}if(a instanceof Array){for(d=0,e=a.length;d<e;d++)b=a[d],this._extern(b);return this}return this._space[a]!=null?(this._extern(a),this):(r._printError("Namespace('"+this._path+"').import","'"+a+"' is not defined"),this)},a.prototype.exist=function(){return r._existSpace(this._path)},a.prototype.use=function(){var a,b,c,d,e,f,g,h,i;this._allocate(),c=this._scope,g=this._names;for(e=0,f=g.length;e<f;e++)b=g[e],c=(h=c[b])!=null?h:c[b]={};i=this._space;for(a in i)d=i[a],c[a]=d;return this},a.prototype.scope=function(a){return a==null&&(a=r._defaultScope),this._scope=a,this},a.prototype.getPath=function(){return this._path},a.prototype._allocate=function(){var a,b,c;if(r._existSpace(this._path))return;this._space=r._setSpace(this._path),b=this._names.length,a=1,c=[];while(a<b)r._setSpace(this._names.slice(0,a).join(".")),c.push(++a);return c},a.prototype._extern=function(a){return this._scope[a]=this._space[a]},a}(),r("jpp.util").register("Namespace",r).use(),j=function(){function a(){}return a.build=function(a,b){return b==null&&(b=""),new Error("Error at "+a+(b!==""?" : "+b:void 0))},a["throw"]=function(b,c){throw c==null&&(c=""),a.build(b,c)},a}(),r("jpp.util").register("Err",j),s=function(){function a(){}return a.PI=Math.PI,a.PI2=a.PI*2,a.PI_2=a.PI/2,a.PI_3=a.PI/3,a.PI_4=a.PI/4,a.PI_6=a.PI/6,a.toRadian=function(a){return a*PI/180},a.toDegree=function(a){return a*180/PI},a.dist=function(a,b,c){return c==null&&(c=!0),c?Math.sqrt(a*a+b*b):a*a+b*b},a.dist2=function(a,b,c,d,e){return e==null&&(e=!0),dist(c-a,d-b,e)},a.map=function(a,b,c,d,e){return a<b&&(a=b),a>c&&(a=c),(a-b)*(e-d)/(c-b)+d},a.internallyDividing=function(a,b,c,d){return a===b?a:(d*a+c*b)/(c+d)},a.externallyDividing=function(a,b,c,d){return a===b?a:(d*a-c*b)/(d-c)},a.sign=function(a){var b;return(b=a<0)!=null?b:-{1:1}},a.choose=function(){var a;return a=1<=arguments.length?A.call(arguments,0):[],a[Math.floor(Math.random()*a.length)]},a.combine=function(a,b,c,d){var e;return d==null&&(d=null),c>1?d==null&&(d=1):d==null&&(d=1-c),e=c+d,a*c/e+b*(1-c/e)},a.range=function(a,b){return Math.random()*(b-a)+a},a}(),r("jpp.util").register("Num",s),a=function(){function a(){}return a.sequence=function(a,b,c){var d,e;b==null&&(b=0),c==null&&(c=1),d=[],e=0;while(e<a)d[e]=e*c,++e;return d},a.choose=function(a,b){var c;return b==null&&(b=!1),c=Math.floor(Math.random()*a.length),b?a.splice(c,1)[0]:a[c]},a.shuffle=function(a,b){var c,d,e,f;b==null&&(b=!1),b&&(a=a.concat()),c=d=a.length;while(c--)e=Math.floor(Math.random()*c),f=a[c],a[c]=a[e],a[e]=f;return a},a}(),r("jpp.util").register("Arr",a),i=function(){function a(){}return a.Linear=function(a,b,c,d,e){return d*b/e+c},a.easeInQuad=function(a,b,c,d,e){return d*(b/=e)*b+c},a.easeOutQuad=function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},a.easeInOutQuad=function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},a.easeInCubic=function(a,b,c,d,e){return d*(b/=e)*b*b+c},a.easeOutCubic=function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},a.easeInOutCubic=function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},a.easeInQuart=function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},a.easeOutQuart=function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},a.easeInOutQuart=function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},a.easeInQuint=function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},a.easeOutQuint=function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},a.easeInOutQuint=function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},a.easeInSine=function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},a.easeOutSine=function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},a.easeInOutSine=function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},a.easeInExpo=function(a,b,c,d,e){return b===0?c:d*Math.pow(2,10*(b/e-1))+c},a.easeOutExpo=function(a,b,c,d,e){return b===e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},a.easeInOutExpo=function(a,b,c,d,e){return b===0?c:b===e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},a.easeInCirc=function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},a.easeOutCirc=function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},a.easeInOutCirc=function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},a.easeInElastic=function(a,b,c,d,e){var f,g,h;return h=1.70158,g=0,f=d,b===0?c:(b/=e)===1?c+d:(g===0&&(g=e*.3),f<Math.abs(d)?(f=d,h=g/4):h=g/(2*Math.PI)*Math.asin(d/f),-f*Math.pow(2,10*(b-=1))*Math.sin((b*e-h)*2*Math.PI/g)+c)},a.easeOutElastic=function(a,b,c,d,e){var f,g,h;return h=1.70158,g=0,f=d,b===0?c:(b/=e)===1?c+d:(g===0&&(g=e*.3),f<Math.abs(d)?(f=d,h=g/4):h=g/(2*Math.PI)*Math.asin(d/f),f*Math.pow(2,-10*b)*Math.sin((b*e-h)*2*Math.PI/g)+d+c)},a.easeInOutElastic=function(a,b,c,d,e){var f,g,h;return h=1.70158,g=0,f=d,b===0?c:(b/=e/2)===2?c+d:(g===0&&(g=e*.3*1.5),f<Math.abs(d)?(f=d,h=g/4):h=g/(2*Math.PI)*Math.asin(d/f),b<1?-0.5*f*Math.pow(2,10*(b-=1))*Math.sin((b*e-h)*2*Math.PI/g)+c:f*Math.pow(2,-10*(b-=1))*Math.sin((b*e-h)*2*Math.PI/g)*.5+d+c)},a.easeInBack=function(a,b,c,d,e,f){return f==null&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},a.easeOutBack=function(a,b,c,d,e,f){return f==null&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},a.easeInOutBack=function(a,b,c,d,e,f){return f==null&&(f=1.70158),(b/=e/2)<1?d/2*b*b*(((f*=1.525)+1)*b-f)+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},a.easeInBounce=function(b,c,d,e,f){return e-a.easeOutBounce(b,f-c,0,e,f)+d},a.easeOutBounce=function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},a.easeInOutBounce=function(b,c,d,e,f){return c<f/2?a.easeInBounce(b,c*2,0,e,f)*.5+d:a.easeOutBounce(b,c*2-f,0,e,f)*.5+e*.5+d},a}(),r("jpp.util").register("Easing",i),k=function(){function a(a,b,c){this.type=a,this.target=b,this.extra=c}return a.COMPLETE="complete",a.OPEN="open",a.CLOSE="close",a.ERROR="error",a.CANCEL="cancel",a.RESIZE="resize",a.INIT="init",a.CONNECT="connect",a.PROGRESS="progress",a.ADDED="added",a.REMOVED="removed",a.SELECT="select",a.FOCUS="focus",a.RENDER="render",a}(),r("jpp.event").register("Event",k),l=function(){function a(a){a==null&&(a=null),this._target=a!=null?a:this,this._listeners={}}return a.prototype.addEventListener=function(a,b){var c,d,e,f,g,h;if(typeof b!="function")return this;(g=(d=this._listeners)[a])==null&&(d[a]=[]),h=this._listeners[a];for(e=0,f=h.length;e<f;e++){c=h[e];if(c===b)return this}return this._listeners[a].push(b),this},a.prototype.removeEventListener=function(a,b){var c,d,e,f,g;if(!this.hasEventListener(a))return this;g=this._listeners[a];for(c=e=0,f=g.length;e<f;c=++e)d=g[c],d===b&&this._listeners[a].splice(c,1);return this._listeners[a].length===0&&delete this._listeners[a],this},a.prototype.removeAllEventListeners=function(a){return a==null&&(a=""),a===""?this._listeners={}:delete this._listeners[a],this},a.prototype.hasEventListener=function(a){return this._listeners[a]!=null},a.prototype.dispatchEvent=function(a,b){var c,d,e,f,g;b==null&&(b=null);if(!this.hasEventListener(a))return this;c=new k(a,this._target,b),g=this._listeners[a];for(e=0,f=g.length;e<f;e++)d=g[e],d.call(this._target,c);return this},a}(),r("jpp.event").register("EventDispatcher",l),e=function(){function a(){}return a.SLEEPING=0,a.EXECUTING=1,a.INTERRUPTING=2,a}(),r("jpp.command").register("CommandState",e),c=function(a){function b(a,c,d){a==null&&(a=null),c==null&&(c=null),d==null&&(d=null),b.__super__.constructor.call(this),this.setExecuteFunction(a),this.setInterruptFunction(c),this.setDestroyFunction(d),this._state=e.SLEEPING,this._parent=null}return C(b,a),b.prototype.execute=function(){return this._state>e.SLEEPING&&j["throw"]("Command.execute","Command is already executing."),this._state=e.EXECUTING,this.getExecuteFunction().call(this,this),this},b.prototype.interrupt=function(){return this._state===e.EXECUTING&&(this._state=e.INTERRUPTING,this.getInterruptFunction().call(this,this)),this},b.prototype.destroy=function(){return this._state=e.SLEEPING,this.getDestroyFunction().call(this,this),this._parent=null,this.__executeFunction=null,this.__interruptFunction=null,this.__destroyFunction=null,this},b.prototype.notifyComplete=function(){switch(this._state){case e.SLEEPING:return this;case e.EXECUTING:return this.dispatchEvent(k.COMPLETE),this.destroy(),this;case e.INTERRUPTING:return this.dispatchEvent(k.COMPLETE),this.destroy(),this}},b.prototype.getExecuteFunction=function(){var a;return(a=this.__executeFunction)!=null?a:this._executeFunction},b.prototype.setExecuteFunction=function(a){return this.__executeFunction=a,this},b.prototype.getInterruptFunction=function(){var a;return(a=this.__interruptFunction)!=null?a:this._interruptFunction},b.prototype.setInterruptFunction=function(a){return this.__interruptFunction=a,this},b.prototype.getDestroyFunction=function(){var a;return(a=this.__destroyFunction)!=null?a:this._destroyFunction},b.prototype.setDestroyFunction=function(a){return this.__destroyFunction=a,this},b.prototype.getState=function(){return this._state},b.prototype.getParent=function(){return this._parent},b.prototype.setParent=function(a){return this._parent=a},b.prototype._executeFunction=function(a){return this.notifyComplete()},b.prototype._interruptFunction=function(a){},b.prototype._destroyFunction=function(a){},b}(l),r("jpp.command").register("Command",c),d=function(a){function b(){var a;a=1<=arguments.length?A.call(arguments,0):[],b.__super__.constructor.call(this),this._commands=[],this.addCommand.apply(this,a)}return C(b,a),b.prototype.addCommand=function(){var a;return a=1<=arguments.length?A.call(arguments,0):[],this._setParent.apply(this,a),this._commands=this.getCommands().concat(a),this},b.prototype.insertCommand=function(){var a,b;return b=arguments[0],a=2<=arguments.length?A.call(arguments,1):[],this._setParent.apply(this,a),Array.prototype.splice.apply(this.getCommands(),[b,0].concat(a)),this},b.prototype._setParent=function(){var a,b,c,d,e;b=1<=arguments.length?A.call(arguments,0):[],e=[];for(c=0,d=b.length;c<d;c++)a=b[c],e.push(a.setParent(this));return e},b.prototype.notifyBreak=function(){},b.prototype.notifyReturn=function(){},b.prototype.getCommandByIndex=function(a){return this._commands[a]},b.prototype.getCommands=function(){return this._commands},b.prototype.getLength=function(){return this._commands.length},b.prototype._executeFunction=function(a){return this.notifyComplete()},b.prototype._interruptFunction=function(a){},b.prototype._destroyFunction=function(a){return this._commands=[]},b}(c),r("jpp.command").register("CommandList",d),w=function(a){function b(){var a;a=1<=arguments.length?A.call(arguments,0):[],this._completeHandler=D(this._completeHandler,this),b.__super__.constructor.apply(this,a),this._currentCommand=null,this._position=0}return C(b,a),b.prototype.addCommand=function(){var a;return a=1<=arguments.length?A.call(arguments,0):[],b.__super__.addCommand.apply(this,a),this},b.prototype.insertCommand=function(){var a;return a=1<=arguments.length?A.call(arguments,0):[],b.__super__.insertCommand.apply(this,[this._position+1].concat(A.call(a))),this},b.prototype._next=function(){return this._currentCommand=this.getCommandByIndex(this._position),this._currentCommand.addEventListener(k.COMPLETE,this._completeHandler),this._currentCommand.execute()},b.prototype._completeHandler=function(a){return this._currentCommand.removeEventListener(k.COMPLETE,this._completeHandler),this._currentCommand=null,++this._position>=this.getLength()?this.notifyComplete():this._next()},b.prototype.notifyBreak=function(){var a;return((a=this._currentCommand)!=null?a.getState():void 0)===e.EXECUTING&&(this._currentCommand.removeEventListener(k.COMPLETE,this._completeHandler),this._currentCommand.interrupt()),this.notifyComplete()},b.prototype.notifyReturn=function(){var a,b;return((a=this._currentCommand)!=null?a.getState():void 0)===e.EXECUTING&&(this._currentCommand.removeEventListener(k.COMPLETE,this._completeHandler),this._currentCommand.interrupt()),(b=this.getParent())!=null&&b.notifyReturn(),this.destroy()},b.prototype.getPosition=function(){return this._position},b.prototype._executeFunction=function(a){return this._position=0,this.getLength()>0?this._next():this.notifyComplete()},b.prototype._interruptFunction=function(a){return this._currentCommand!=null&&(this._currentCommand.removeEventListener(k.COMPLETE,this._completeHandler),this._currentCommand.interrupt()),this._currentCommand=null,this._position=0,b.__super__._interruptFunction.call(this,a)},b.prototype._destroyFunction=function(a){return this._currentCommand!=null&&(this._currentCommand.removeEventListener(k.COMPLETE,this._completeHandler),this._currentCommand.destroy()),this._currentCommand=null,this._position=0,b.__super__._destroyFunction.call(this,a)},b}(d),r("jpp.command").register("SerialList",w),t=function(a){function b(){var a;a=1<=arguments.length?A.call(arguments,0):[],this._completeHandler=D(this._completeHandler,this),b.__super__.constructor.apply(this,a),this._completeCount=0}return C(b,a),b.prototype.addCommand=function(){var a;return a=1<=arguments.length?A.call(arguments,0):[],b.__super__.addCommand.apply(this,a),this},b.prototype.insertCommand=function(){var a;return a=1<=arguments.length?A.call(arguments,0):[],b.__super__.insertCommand.apply(this,[this.getLength()].concat(A.call(a))),this},b.prototype._completeHandler=function(a){if(++this._completeCount>=this.getLength())return this.notifyComplete()},b.prototype.notifyBreak=function(){var a,b,c,d;d=this.getCommands();for(b=0,c=d.length;b<c;b++)a=d[b],a.getState()===e.EXECUTING&&(a.removeEventListener(k.COMPLETE,this._completeHandler),a.interrupt());return this.notifyComplete()},b.prototype.notifyReturn=function(){var a,b,c,d,f;d=this.getCommands();for(b=0,c=d.length;b<c;b++)a=d[b],a.getState()===e.EXECUTING&&(a.removeEventListener(k.COMPLETE,this._completeHandler),a.interrupt());return(f=this.getParent())!=null&&f.notifyReturn(),this.destroy()},b.prototype.getCompleteCount=function(){return this._completeCount},b.prototype._executeFunction=function(a){var b,c,d,e,f;this._completeCount=0,e=this.getCommands(),f=[];for(c=0,d=e.length;c<d;c++)b=e[c],b.addEventListener(k.COMPLETE,this._completeHandler),f.push(b.execute());return f},b.prototype._interruptFunction=function(a){var c,d,e,f;f=this.getCommands();for(d=0,e=f.length;d<e;d++)c=f[d],c.removeEventListener(k.COMPLETE,this._completeHandler),c.interrupt();return b.__super__._interruptFunction.call(this,a)},b.prototype._destroyFunction=function(a){var c,d,e,f;f=this.getCommands();for(d=0,e=f.length;d<e;d++)c=f[d],c.removeEventListener(k.COMPLETE,this._completeHandler),c.destroy();return this._completeCount=0,b.__super__._destroyFunction.call(this,a)},b}(d),r("jpp.command").register("ParallelList",t),b=function(a){function b(){b.__super__.constructor.call(this)}return C(b,a),b.prototype._executeFunction=function(a){var b;return(b=this.getParent())!=null&&b.notifyBreak(),this.notifyComplete()},b.prototype._interruptFunction=function(a){},b.prototype._destroyFunction=function(a){},b}(c),r("jpp.command").register("Break",b),u=function(a){function b(){b.__super__.constructor.call(this)}return C(b,a),b.prototype._executeFunction=function(a){var b;return(b=this.getParent())!=null&&b.notifyReturn(),this.notifyComplete()},b.prototype._interruptFunction=function(a){},b.prototype._destroyFunction=function(a){},b}(c),r("jpp.command").register("Return",u),m=function(a){function b(a,c,d,e){a==null&&(a=null),c==null&&(c=[]),d==null&&(d=null),e==null&&(e=null),this._completeHandler=D(this._completeHandler,this),b.__super__.constructor.call(this),this._func=a,this._args=c,this._dispatcher=d,this._eventType=e}return C(b,a),b.prototype._completeHandler=function(a){return this.notifyComplete()},b.prototype.getFunction=function(){return this._func},b.prototype.setFunction=function(a){return this._func=a,this},b.prototype.getArguments=function(){return this._args},b.prototype.setArguments=function(a){return this._args=a,this},b.prototype._executeFunction=function(a){return this._dispatcher!=null&&this._eventType!=null?(this._dispatcher.addEventListener(this._eventType,this._completeHandler),typeof this._func=="function"?this._func.apply(this,this._args):void 0):(typeof this._func=="function"&&this._func.apply(this,this._args),this.notifyComplete())},b.prototype._interruptFunction=function(a){if(this._dispatcher!=null&&this._eventType!=null)return this._dispatcher.removeEventListener(this._eventType,this._completeHandler)},b.prototype._destroyFunction=function(a){return this._func=null,this._args=null,this._dispatcher=null,this._eventType=null},b}(c),r("jpp.command").register("Func",m),y=function(a){function b(a){a==null&&(a=1),this._completeHandler=D(this._completeHandler,this),b.__super__.constructor.call(this),this._time=a,this._timeoutId=-1}return C(b,a),b.prototype._cancel=function(){return this._timeoutId!==-1&&clearTimeout(this._timeoutId),this._timeoutId=-1},b.prototype._completeHandler=function(a){return this.notifyComplete()},b.prototype.getTime=function(){return this._time},b.prototype.setTime=function(a){return this._time=a,this},b.prototype._executeFunction=function(a){return this._timeoutId=setTimeout(this._completeHandler,this._time*1e3)},b.prototype._interruptFunction=function(a){return this._cancel()},b.prototype._destroyFunction=function(a){return this._cancel()},b}(c),r("jpp.command").register("Wait",y),q=function(a){function b(a,c){a==null&&(a=null),c==null&&(c=null),this._handler=D(this._handler,this),b.__super__.constructor.call(this),this._type=a,this._dispatcher=c}return C(b,a),b.prototype._handler=function(a){return this.notifyComplete()},b.prototype.getType=function(){return this._type},b.prototype.setType=function(a){return this._type=a,this},b.prototype.getDispatcher=function(){return this._dispatcher},b.prototype.setDispatcher=function(a){return this._dispatcher=a,this},b.prototype._executeFunction=function(a){var b;if(this._type!=null)return(b=this._dispatcher)!=null?b.addEventListener(this._type,this._handler):void 0},b.prototype._interruptFunction=function(a){var b;if(this._type!=null)return(b=this._dispatcher)!=null?b.removeEventListener(this._type,this._handler):void 0},b.prototype._destroyFunction=function(a){var b;return this._type!=null&&(b=this._dispatcher)!=null&&b.removeEventListener(this._type,this._handler),this._type=null,this._dispatcher=null},b}(c),r("jpp.command").register("Listen",q),x=function(a){function b(a,c,d,e,f,g,h,j){d==null&&(d=null),e==null&&(e=1),f==null&&(f=i.Linear),g==null&&(g=null),h==null&&(h=null),j==null&&(j=null),this._intervalHandler=D(this._intervalHandler,this),b.__super__.constructor.call(this),this._target=a,this._to=c,this._from=d,this._time=e,this._easing=f,this._onStart=g,this._onUpdate=h,this._onComplete=j,this._intervalId=-1,this._tRatio=0,this._vRatio=0,this._startTime}return C(b,a),b.prototype._cancel=function(){return this._intervalId!==-1&&clearInterval(this._intervalId),this._intervalId=-1},b.prototype._apply=function(a){var b,c,d,e,f;this._tRatio=a,this._vRatio=this._easing(0,this._tRatio,0,1,1),e=this._to,f=[];for(b in e)d=e[b],c=this._from[b],f.push(this._target[b]=c+(d-c)*this._vRatio);return f},b.prototype._intervalHandler=function(a){var b;return b=((new Date).getTime()-this._startTime)/1e3,b<this._time?(this._apply(b/this._time),typeof this._onUpdate=="function"?this._onUpdate():void 0):(this._apply(1),typeof this._onUpdate=="function"&&this._onUpdate(),typeof this._onComplete=="function"&&this._onComplete(),this._cancel(),this.notifyComplete())},b.prototype.getTarget=function(){return this._target},b.prototype.setTarget=function(a){return this._target=a,this},b.prototype.getTo=function(){return this._to},b.prototype.setTo=function(a){return this._to=a,this},b.prototype.getFrom=function(){return this._from},b.prototype.setFrom=function(a){return this._from=a,this},b.prototype.getTime=function(){return this._time},b.prototype.setTime=function(a){return this._time=a,this},b.prototype.getEasing=function(){return this._easing},b.prototype.setEasing=function(a){return this._easing=a,this},b.prototype.getOnStart=function(){return this._onStart},b.prototype.setOnStart=function(a){return this._onStart=a,this},b.prototype.getOnUpdate=function(){return this._onUpdate},b.prototype.setOnUpdate=function(a){return this._onUpdate=a,this},b.prototype.getOnComplete=function(){return this._onComplete},b.prototype.setOnComplete=function(a){return this._onComplete=a,this},b.prototype.getRatio=function(){return this._vRatio},b.prototype.getTimeRatio=function(){return this._tRatio},b.prototype._executeFunction=function(a){var b,c,d,e,f,g;(e=this._from)==null&&(this._from={}),f=this._to;for(b in f)c=f[b],(g=(d=this._from)[b])==null&&(d[b]=this._target[b]);return this._time>0?(this._intervalId=setInterval(this._intervalHandler,10),this._startTime=(new Date).getTime(),this._apply(0),typeof this._onStart=="function"?this._onStart():void 0):(this._apply(0),typeof this._onStart=="function"&&this._onStart(),this._apply(1),typeof this._onUpdate=="function"&&this._onUpdate(),typeof this._onComplete=="function"&&this._onComplete(),this.notifyComplete())},b.prototype._interruptFunction=function(a){return this._cancel()},b.prototype._destroyFunction=function(a){return this._cancel()},b}(c),r("jpp.command").register("Tween",x),n=function(a){function b(a){a==null&&(a=null),this._completeHandler=D(this._completeHandler,this),b.__super__.constructor.call(this),this._options=a!=null?a:{},this._status="",this._isSucceed=!1}return C(b,a),b.prototype._completeHandler=function(a,b){var c;console.log(this),this._status=b,this._isSucceed=b==="success",typeof (c=this._options).complete=="function"&&c.complete(a,b);if(this.getState()===e.EXECUTING)return this.notifyComplete()},b.prototype.getOptions=function(){return this._options},b.prototype.setOptions=function(a){return this._options=a,this},b.prototype.getUrl=function(){return this._options.url},b.prototype.setUrl=function(a){return this._options.url=a,this},b.prototype.getMethod=function(){return this._options.type},b.prototype.setMethod=function(a){return this._options.type=a,this},b.prototype.getData=function(){return this._options.data},b.prototype.setData=function(a){return this._options.data=a,this},b.prototype.getDataType=function(){return this._options.dataType},b.prototype.setDataType=function(a){return this._options.dataType=a,this},b.prototype.getOnSuccess=function(){return this._options.success},b.prototype.setOnSuccess=function(a){return this._options.success=a,this},b.prototype.getOnError=function(){return this._options.error},b.prototype.setOnError=function(a){return this._options.error=a,this},b.prototype.getOnComplete=function(){return this._options.complete},b.prototype.setOnComplete=function(a){return this._options.complete=a,this},b.prototype.getStatus=function(){return this._status},b.prototype.getIsSucceed=function(){return this._isSucceed},b.prototype._executeFunction=function(a){var b,c,d,e;c={},e=this._options;for(b in e)d=e[b],c[b]=d;return c.complete=this._completeHandler,jQuery.ajax(c)},b.prototype._interruptFunction=function(a){return this},b.prototype._destroyFunction=function(a){return this._options=null,this._status="",this._isSucceed=!1},b}(c),r("jpp.command").register("JqueryAjax",n),o=function(a){function b(a,c,d,e,f){a==null&&(a=null),c==null&&(c=null),d==null&&(d=null),e==null&&(e=null),f==null&&(f=null),b.__super__.constructor.call(this,{type:"get",url:a,data:c,success:d,error:e,dataType:f})}return C(b,a),b}(n),r("jpp.command").register("JqueryGet",o),p=function(a){function b(a,c,d,e,f){a==null&&(a=null),c==null&&(c=null),d==null&&(d=null),e==null&&(e=null),f==null&&(f=null),b.__super__.constructor.call(this,{type:"post",url:a,data:c,success:d,error:e,dataType:f})}return C(b,a),b}(n),r("jpp.command").register("JqueryPost",p),f=function(a){function b(a){this._kazitoriChangeHandler=D(this._kazitoriChangeHandler,this);var c,d,e;b.__super__.constructor.call(this,this),a==null&&(a={}),a.routes=(c=a.route)!=null?c:this.routes,a.root=(d=a.root)!=null?d:this.root,this._isReleaseMode=(e=a.isReleaseMode)!=null?e:!0,this._kazitori=new Kazitori(a),this._kazitori.addEventListener(KazitoriEvent.CHANGE,this._kazitoriChangeHandler),this._printCopyright()}return C(b,a),b.VERSION="0.0.1",b.prototype._print=function(){var a;a=1<=arguments.length?A.call(arguments,0):[];if(!this._isReleaseMode)return console.log(a.join(" "))},b.prototype._printCopyright=function(){return this._print("----------------------------------------"),this._print("Compass "+b.VERSION+"  © Copyright alumican.net All rights reserved."),this._print("Kazitori "+this._kazitori.VERSION+"  © Copyright hageee.net All rights reserved."),this._print("root  : "+this._kazitori.root),this._print("routes: "+this._kazitori.routes),this._print("----------------------------------------")},b.prototype._kazitoriChangeHandler=function(a){var b,c,d;return d=a.prev,c=a.next,this._print("[Compass] change : prev = '"+d+"' next = '"+c+"'"),b=h.calcPath(d,c),this._print("[Compass] change :  '"+b.join("' -> '")+"'"),this.dispatchEvent(g.CHANGE,{prev:d,next:c})},b.prototype.goto=function(a){return this._print("[Compass] goto : '"+a+"'"),this._kazitori.change(a)},b.prototype.next=function(){return this._print("[Compass] next"),this._kazitori.torikazi()},b.prototype.prev=function(){return this._print("[Compass] prev"),this._kazitori.omokazi()},b}(l),r("jpp.compass").register("Compass",f),g=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return C(b,a),b.CHANGE="change",b}(k),r("jpp.compass").register("CompassEvent",g),h=function(){function a(){}return a.calcPath=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n;a===null&&(a=""),b===null&&(b=""),a.charAt(0)==="/"&&(a=a.substr(1)),b.charAt(0)==="/"&&(b=b.substr(1)),h=a.split("/"),g=b.split("/"),i="",e=0;for(k=0,m=h.length;k<m;k++)j=h[k],i+="/"+j,h[e]=i,++e;i="",e=0;for(l=0,n=g.length;l<n;l++)j=g[l],i+="/"+j,g[e]=i,++e;f=Math.min(h.length,g.length),c=0;while(c<f){if(h[c]!==g[c])break;++c}d=[],f=c,e=h.length-1;while(e>=f)d.push(h[e]),--e;f=g.length-1,e=c;while(e<=f)d.push(g[e]),++e;return d},a}(),v=function(){function a(a){this._path=a,this._paths=this._path.split("/"),this._level=this._paths.length-1,this._isRoot=this._level===0,this._parent=this._isRoot?null:this._paths[this._level-1]}return a.prototype.getPath=function(){return this._path},a.prototype.getPaths=function(){return this._paths},a.prototype.getLevel=function(){return this._level},a.prototype.getIsRoot=function(){return this._isRoot},a.prototype.getParent=function(){return this._parent},a}(),r("jpp.compass").register("Scene",v)}).call(this)